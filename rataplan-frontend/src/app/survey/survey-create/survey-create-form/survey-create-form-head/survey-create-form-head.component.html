<div>
  <div class="margin-top">
    <form [formGroup]="formGroup">
      <div class="inputFieldWrapper">
        <mat-form-field class="mat-form-field-flex" appearance="fill">
          <mat-label>Umfragename</mat-label>
          <input type="text" matInput formControlName="name">
          <mat-error [textContent]="errorMessageService.genericFormError(formGroup.get('name'))"/>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="mat-form-field-flex" appearance="fill">
          <mat-label>Beschreibung</mat-label>
          <textarea matInput formControlName="description"></textarea>
          <mat-error [textContent]="errorMessageService.genericFormError(formGroup.get('description'))"/>
        </mat-form-field>
      </div>
      <mat-checkbox formControlName="anonymousParticipation"><span class="newLine">Erlaube anonyme Antworten</span>
      </mat-checkbox>
      <br><br>
      <mat-form-field class="mat-form-field-flex" appearance="fill">
        <mat-label>Von</mat-label>
        <input
          type="text"
          [mtxDatetimepicker]="startDate"
          [min]="minStartDate$ | ngrxPush"
          matInput
          formControlName="startDate"
          required
        >
        <mtx-datetimepicker-toggle [for]="startDate" matSuffix></mtx-datetimepicker-toggle>
        <mtx-datetimepicker #startDate></mtx-datetimepicker>
        <mat-error [textContent]="errorMessageService.genericFormError(formGroup.get('startDate'))"/>
      </mat-form-field>
      <br>
      <mat-form-field class="mat-form-field-flex" appearance="fill">
        <mat-label>Bis</mat-label>
        <input
          type="text"
          [min]="formGroup.controls.startDate.value ?? minStartDate$ | ngrxPush"
          [mtxDatetimepicker]="endDate"
          matInput
          formControlName="endDate"
          required
        >
        <mtx-datetimepicker-toggle [for]="endDate" matSuffix></mtx-datetimepicker-toggle>
        <mtx-datetimepicker #endDate></mtx-datetimepicker>
        <mat-error [textContent]="errorMessageService.genericFormError(formGroup.get('endDate'))"/>
      </mat-form-field>
      <br>
      <mat-checkbox
        (change)="enableAndDisableTimezoneSettings()"
        style="margin-bottom: 1rem"
        formControlName="timezoneActive"
        #timezoneActive
      >Zeitzone einstellen
      </mat-checkbox>
      <br>
      <mat-form-field appearance="fill" *ngIf="timezoneActive.checked">
        <mat-label>Zeitzone</mat-label>
        <input
          [required]="timezoneActive.checked"
          formControlName="timezone"
          matInput
          [matAutocomplete]="auto"
          aria-label="Land auswählen"
        >
        <mat-error>{{ errorMessageService.genericFormError(formGroup.get('timezone')) }}</mat-error>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="convertDates($event.option.viewValue)">
          <mat-option
            *ngFor="let timeZone of filteredOptions | async"
            [value]="timeZone"
          >{{ timeZone }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <br>
      <mat-checkbox formControlName="openAccess"><span class="newLine">Öffentliche Umfrage</span>
      </mat-checkbox>
      <br><br>
      <div class="nextContainer">
        <button
          type="button" mat-icon-button color="primary"
          (click)="formGroup.valid && doSubmit(formGroup.value, surveyCreateActions.nextGroup())"
          [disabled]="!formGroup.valid"
        >
          <mat-icon>navigate_next</mat-icon>
        </button>
      </div>
    </form>
  </div>
</div>